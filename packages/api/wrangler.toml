name = "studio-coop-api"
main = "dist/worker.js"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]
workers_dev = true

[build]
command = "node build.mjs"

[vars]
ENVIRONMENT = "production"
WEB_URL = "https://studio.coop"

# Secrets (set via `wrangler secret put <NAME>`):
# SUPABASE_URL
# SUPABASE_SERVICE_ROLE_KEY
# JWT_SECRET
# STRIPE_SECRET_KEY
# STRIPE_WEBHOOK_SECRET
# STRIPE_CONNECT_CLIENT_ID
# RESEND_API_KEY

# Custom domain â€” auto-creates DNS record
[[routes]]
pattern = "api.studio.coop/*"
zone_name = "studio.coop"

[env.staging]
name = "studio-coop-api-staging"
[env.staging.vars]
ENVIRONMENT = "staging"
